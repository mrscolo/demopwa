(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1e5b":function(e,t,n){},"2da0":function(e,t,n){"use strict";var i=n("1e5b"),a=n.n(i);a.a},"713b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-header",{attrs:{elevated:""}},[n("q-toolbar",[n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),n("q-toolbar-title",[e._v("Cofares PWA demo")])],1)],1),n("q-drawer",{attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-1"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[n("q-list",e._l(e.essentialLinks,(function(t){return n("EssentialLink",e._b({key:t.title},"EssentialLink",t,!1))})),1)],1),n("q-page-container",{staticClass:"xone-container"},[n("transition",{attrs:{appear:"","enter-active-class":"animated zoomInUp"}},[n("router-view")],1)],1)],1)},a=[],o=(n("e6cf"),n("bf19"),n("c973")),r=n.n(o),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-item",{attrs:{clickable:"",tag:"a",target:"_blank"},on:{click:function(t){return e.goToLink(e.link)}}},[e.icon?n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:e.icon}})],1):e._e(),n("q-item-section",[n("q-item-label",[e._v(e._s(e.title))]),n("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.caption))])],1)],1)},c=[],l={name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}},methods:{goToLink(e){this.$router.currentRoute.path!=e&&this.$router.push(e)}}},u=l,p=n("2877"),f=n("66e5"),d=n("4074"),b=n("0016"),g=n("0170"),h=n("eebe"),m=n.n(h),w=Object(p["a"])(u,s,c,!1,null,null,null),y=w.exports;m()(w,"components",{QItem:f["a"],QItemSection:d["a"],QIcon:b["a"],QItemLabel:g["a"]});const k=[{title:"Home",icon:"home",link:"/"},{title:"Page1",icon:"dashboard",link:"/page2"},{title:"Page2",icon:"table_rows",link:"/page3"},{title:"Page4",icon:"view_carousel",link:"/page4"},{title:"Notifications",icon:"announcement",link:"/page5"}];var v={name:"MainLayout",components:{EssentialLink:y},data(){return{leftDrawerOpen:!1,essentialLinks:k,swReg:null,publicKey:null,showNotificationsMessage:!1}},mounted(){if(!navigator.serviceWorker||!window.Notification)return;this.checkNotifications();const e=window.location.href.includes("localhost")?"/sw.js":"/demopwa/sw.js";navigator.serviceWorker.register(e).then(e=>{this.swReg=e,this.swReg.pushManager.getSubscription().then(this.checkSubscription)})},methods:{checkNotifications(){var e=this;return r()((function*(){if("granted"!=Notification.permission&&e.$q.notify({type:"warning",message:"Please allow notifications."}),"default"==Notification.permission){const t=yield Notification.requestPermission();"granted"==t?new Notification("Test notification"):e.showNotificationsMessage=!0}}))()},getPublicKey(){var e=this;return r()((function*(){const t=yield fetch("http://nasamiyares.myqnapcloud.com:3000/api/key"),n=yield t.arrayBuffer();return e.publicKey=n,n}))()},checkSubscription(){var e=this;return r()((function*(){if(!e.swReg)return;const t=yield e.getPublicKey(),n=yield e.swReg.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}),i=yield n.toJSON();yield fetch("http://nasamiyares.myqnapcloud.com:3000/api/subscribe",{method:"POST",headers:{"Content-Type":" application/json"},body:JSON.stringify(i)})}))()}}},q=v,_=(n("2da0"),n("4d5a")),L=n("e359"),N=n("65c6"),O=n("9c40"),Q=n("6ac5"),S=n("9404"),P=n("1c1c"),T=n("09e3"),D=Object(p["a"])(q,i,a,!1,null,null,null);t["default"]=D.exports;m()(D,"components",{QLayout:_["a"],QHeader:L["a"],QToolbar:N["a"],QBtn:O["a"],QToolbarTitle:Q["a"],QDrawer:S["a"],QList:P["a"],QPageContainer:T["a"]})}}]);